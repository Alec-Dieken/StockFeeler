class StockQuery {
    constructor() {
        this.tickers = [
            "A",
            "AA",
            "AAL",
            "AAP",
            "AAPL",
            "ABBV",
            "ABC",
            "ABNB",
            "ABT",
            "ACGL",
            "ACHC",
            "ACI",
            "ACM",
            "ACN",
            "ADBE",
            "ADC",
            "ADI",
            "ADM",
            "ADP",
            "ADSK",
            "ADT",
            "AEE",
            "AEP",
            "AES",
            "AFG",
            "AFL",
            "AFRM",
            "AGCO",
            "AGL",
            "AGNC",
            "AGO",
            "AGR",
            "AIG",
            "AIRC",
            "AIZ",
            "AJG",
            "AKAM",
            "AL",
            "ALB",
            "ALGM",
            "ALGN",
            "ALK",
            "ALL",
            "ALLE",
            "ALLY",
            "ALNY",
            "ALSN",
            "AM",
            "AMAT",
            "AMBP",
            "AMC",
            "AMCR",
            "AMD",
            "AME",
            "AMED",
            "AMG",
            "AMGN",
            "AMH",
            "AMP",
            "AMT",
            "AMZN",
            "AN",
            "ANET",
            "ANSS",
            "AON",
            "AOS",
            "APA",
            "APD",
            "APH",
            "APLS",
            "APO",
            "APP",
            "APTV",
            "AR",
            "ARE",
            "ARES",
            "ARMK",
            "ARW",
            "ASH",
            "ATO",
            "ATR",
            "ATVI",
            "AVB",
            "AVGO",
            "AVT",
            "AVTR",
            "AVY",
            "AWI",
            "AWK",
            "AXON",
            "AXP",
            "AXS",
            "AXTA",
            "AYI",
            "AYX",
            "AZEK",
            "AZO",
            "AZPN",
            "AZTA",
            "BA",
            "BAC",
            "BAH",
            "BALL",
            "BAX",
            "BBWI",
            "BBY",
            "BC",
            "BDX",
            "BEN",
            "BEPC",
            "BERY",
            "BF.A",
            "BFAM",
            "BF.B",
            "BG",
            "BHF",
            "BIIB",
            "BILL",
            "BIO",
            "BJ",
            "BK",
            "BKI",
            "BKNG",
            "BKR",
            "BLD",
            "BLDR",
            "BLK",
            "BMRN",
            "BMY",
            "BOKF",
            "BPOP",
            "BR",
            "BRK.B",
            "BRKR",
            "BRO",
            "BRX",
            "BSX",
            "BSY",
            "BURL",
            "BWA",
            "BWXT",
            "BX",
            "BXP",
            "BYD",
            "C",
            "CABO",
            "CACC",
            "CACI",
            "CAG",
            "CAH",
            "CAR",
            "CARR",
            "CASY",
            "CAT",
            "CB",
            "CBOE",
            "CBRE",
            "CBSH",
            "CC",
            "CCCS",
            "CCI",
            "CCK",
            "CCL",
            "CDAY",
            "CDNS",
            "CDW",
            "CE",
            "CEG",
            "CELH",
            "CERT",
            "CF",
            "CFG",
            "CFLT",
            "CFR",
            "CG",
            "CGNX",
            "CHD",
            "CHDN",
            "CHE",
            "CHH",
            "CHK",
            "CHPT",
            "CHRW",
            "CHTR",
            "CI",
            "CIEN",
            "CINF",
            "CL",
            "CLF",
            "CLH",
            "CLVT",
            "CLX",
            "CMA",
            "CMCSA",
            "CME",
            "CMG",
            "CMI",
            "CMS",
            "CNA",
            "CNC",
            "CNHI",
            "CNM",
            "CNP",
            "CNXC",
            "COF",
            "COHR",
            "COIN",
            "COLB",
            "COLD",
            "COLM",
            "COO",
            "COP",
            "COST",
            "COTY",
            "CPB",
            "CPNG",
            "CPRI",
            "CPRT",
            "CPT",
            "CR",
            "CRI",
            "CRL",
            "CRM",
            "CROX",
            "CRUS",
            "CRWD",
            "CSCO",
            "CSGP",
            "CSL",
            "CSX",
            "CTAS",
            "CTLT",
            "CTRA",
            "CTSH",
            "CTVA",
            "CUBE",
            "CUZ",
            "CVS",
            "CVX",
            "CW",
            "CWEN",
            "CWE.A",
            "CXT",
            "CZR",
            "D",
            "DAL",
            "DAR",
            "DASH",
            "DBX",
            "DCI",
            "DD",
            "DDOG",
            "DE",
            "DECK",
            "DFS",
            "DG",
            "DGX",
            "DHI",
            "DHR",
            "DINO",
            "DIS",
            "DISH",
            "DKNG",
            "DKS",
            "DLB",
            "DLR",
            "DLTR",
            "DNA",
            "DNB",
            "DOCS",
            "DOCU",
            "DOV",
            "DOW",
            "DOX",
            "DPZ",
            "DRI",
            "DRVN",
            "DT",
            "DTE",
            "DTM",
            "DUK",
            "DV",
            "DVA",
            "DVN",
            "DXC",
            "DXCM",
            "EA",
            "EBAY",
            "ECL",
            "ED",
            "EEFT",
            "EFX",
            "EGP",
            "EHC",
            "EIX",
            "EL",
            "ELAN",
            "ELS",
            "ELV",
            "EME",
            "EMN",
            "EMR",
            "ENOV",
            "ENPH",
            "ENTG",
            "EOG",
            "EPAM",
            "EPR",
            "EQH",
            "EQIX",
            "EQR",
            "EQT",
            "ES",
            "ESAB",
            "ESI",
            "ESS",
            "ESTC",
            "ETN",
            "ETR",
            "ETSY",
            "EVR",
            "EVRG",
            "EW",
            "EWBC",
            "EXAS",
            "EXC",
            "EXEL",
            "EXP",
            "EXPD",
            "EXPE",
            "EXR",
            "F",
            "FAF",
            "FANG",
            "FAST",
            "FBIN",
            "FCN",
            "FCNCA",
            "FCX",
            "FDS",
            "FDX",
            "FE",
            "FERG",
            "FFIV",
            "FHB",
            "FHN",
            "FI",
            "FICO",
            "FIS",
            "FITB",
            "FIVE",
            "FIVN",
            "FLO",
            "FLS",
            "FLT",
            "FMC",
            "FNB",
            "FND",
            "FNF",
            "FOUR",
            "FOX",
            "FOXA",
            "FR",
            "FRPT",
            "FRT",
            "FSLR",
            "FTI",
            "FTNT",
            "FTV",
            "FWONA",
            "FWONK",
            "FYBR",
            "G",
            "GD",
            "GDDY",
            "GE",
            "GEHC",
            "GEN",
            "GFS",
            "GGG",
            "GILD",
            "GIS",
            "GL",
            "GLOB",
            "GLPI",
            "GLW",
            "GM",
            "GME",
            "GMED",
            "GNRC",
            "GNTX",
            "GO",
            "GOOG",
            "GOOGL",
            "GPC",
            "GPK",
            "GPN",
            "GPS",
            "GRMN",
            "GS",
            "GTES",
            "GTLB",
            "GWRE",
            "GWW",
            "GXO",
            "H",
            "HAL",
            "HAS",
            "HAYW",
            "HBAN",
            "HCA",
            "HCP",
            "HD",
            "HE",
            "HEI",
            "HEI.A",
            "HES",
            "HHC",
            "HIG",
            "HII",
            "HIW",
            "HLI",
            "HLT",
            "HOG",
            "HOLX",
            "HON",
            "HOOD",
            "HPE",
            "HPQ",
            "HR",
            "HRB",
            "HRL",
            "HSIC",
            "HST",
            "HSY",
            "HTZ",
            "HUBB",
            "HUBS",
            "HUM",
            "HUN",
            "HWM",
            "HXL",
            "HZNP",
            "IAC",
            "IART",
            "IBKR",
            "IBM",
            "ICE",
            "ICLR",
            "ICUI",
            "IDA",
            "IDXX",
            "IEX",
            "IFF",
            "ILMN",
            "INCY",
            "INFA",
            "INGR",
            "INSP",
            "INTC",
            "INTU",
            "INVH",
            "IONS",
            "IP",
            "IPG",
            "IPGP",
            "IQV",
            "IR",
            "IRDM",
            "IRM",
            "ISRG",
            "IT",
            "ITT",
            "ITW",
            "IVZ",
            "J",
            "JAZZ",
            "JBHT",
            "JBL",
            "JCI",
            "JEF",
            "JHG",
            "JKHY",
            "JLL",
            "JNJ",
            "JNPR",
            "JPM",
            "JWN",
            "K",
            "KBR",
            "KD",
            "KDP",
            "KEX",
            "KEY",
            "KEYS",
            "KHC",
            "KIM",
            "KKR",
            "KLAC",
            "KMB",
            "KMI",
            "KMPR",
            "KMX",
            "KNSL",
            "KNX",
            "KO",
            "KR",
            "KRC",
            "KRTX",
            "KSS",
            "L",
            "LAD",
            "LAMR",
            "LAZ",
            "LBRDA",
            "LBRDK",
            "LCID",
            "LDOS",
            "LEA",
            "LECO",
            "LEG",
            "LEN",
            "LEN.B",
            "LFUS",
            "LH",
            "LHX",
            "LII",
            "LIN",
            "LITE",
            "LKQ",
            "LLY",
            "LMT",
            "LNC",
            "LNG",
            "LNT",
            "LOPE",
            "LOW",
            "LPLA",
            "LPX",
            "LRCX",
            "LSCC",
            "LSI",
            "LSTR",
            "LSXMA",
            "LSXMK",
            "LULU",
            "LUV",
            "LVS",
            "LW",
            "LYB",
            "LYFT",
            "LYV",
            "M",
            "MA",
            "MAA",
            "MAN",
            "MANH",
            "MAR",
            "MAS",
            "MASI",
            "MAT",
            "MCD",
            "MCHP",
            "MCK",
            "MCO",
            "MCW",
            "MDB",
            "MDLZ",
            "MDT",
            "MDU",
            "MEDP",
            "MET",
            "META",
            "MGM",
            "MHK",
            "MIDD",
            "MKC",
            "MKL",
            "MKSI",
            "MKTX",
            "MLM",
            "MMC",
            "MMM",
            "MNST",
            "MO",
            "MOH",
            "MORN",
            "MOS",
            "MP",
            "MPC",
            "MPW",
            "MPWR",
            "MRCY",
            "MRK",
            "MRNA",
            "MRO",
            "MRTX",
            "MRVI",
            "MRVL",
            "MS",
            "MSA",
            "MSCI",
            "MSFT",
            "MSGS",
            "MSI",
            "MSM",
            "MTB",
            "MTCH",
            "MTD",
            "MTG",
            "MTN",
            "MTZ",
            "MU",
            "MUSA",
            "NATI",
            "NBIX",
            "NCLH",
            "NCNO",
            "NCR",
            "NDAQ",
            "NDSN",
            "NEE",
            "NEM",
            "NET",
            "NEU",
            "NEWR",
            "NFE",
            "NFG",
            "NFLX",
            "NI",
            "NKE",
            "NLY",
            "NNN",
            "NOC",
            "NOV",
            "NOW",
            "NRG",
            "NSA",
            "NSC",
            "NTAP",
            "NTNX",
            "NTRA",
            "NTRS",
            "NU",
            "NUE",
            "NVCR",
            "NVDA",
            "NVR",
            "NVST",
            "NVT",
            "NWL",
            "NWS",
            "NWSA",
            "NXST",
            "NYCB",
            "NYT",
            "O",
            "OC",
            "ODFL",
            "OGE",
            "OGN",
            "OHI",
            "OKE",
            "OKTA",
            "OLED",
            "OLLI",
            "OLN",
            "OLPX",
            "OMC",
            "OMF",
            "ON",
            "ORCL",
            "ORI",
            "ORLY",
            "OSK",
            "OTIS",
            "OVV",
            "OWL",
            "OXY",
            "OZK",
            "PAG",
            "PANW",
            "PARA",
            "PARAA",
            "PATH",
            "PAYC",
            "PAYX",
            "PB",
            "PCAR",
            "PCG",
            "PCOR",
            "PCTY",
            "PDCE",
            "PEAK",
            "PEG",
            "PEGA",
            "PEN",
            "PENN",
            "PEP",
            "PFE",
            "PFG",
            "PFGC",
            "PG",
            "PGR",
            "PH",
            "PHM",
            "PII",
            "PINC",
            "PINS",
            "PK",
            "PKG",
            "PLD",
            "PLNT",
            "PLTK",
            "PLTR",
            "PLUG",
            "PM",
            "PNC",
            "PNFP",
            "PNR",
            "PNW",
            "PODD",
            "POOL",
            "POST",
            "PPC",
            "PPG",
            "PPL",
            "PRGO",
            "PRI",
            "PRU",
            "PSA",
            "PSTG",
            "PSX",
            "PTC",
            "PTON",
            "PVH",
            "PWR",
            "PXD",
            "PYCR",
            "PYPL",
            "QCOM",
            "QDEL",
            "QGEN",
            "QRVO",
            "QS",
            "R",
            "RARE",
            "RBA",
            "RBC",
            "RBLX",
            "RCL",
            "RCM",
            "RE",
            "REG",
            "REGN",
            "REXR",
            "REYN",
            "RF",
            "RGA",
            "RGEN",
            "RGLD",
            "RH",
            "RHI",
            "RITM",
            "RIVN",
            "RJF",
            "RKT",
            "RL",
            "RLI",
            "RMD",
            "RNG",
            "RNR",
            "ROIV",
            "ROK",
            "ROKU",
            "ROL",
            "ROP",
            "ROST",
            "RPM",
            "RPRX",
            "RRC",
            "RRX",
            "RS",
            "RSG",
            "RTX",
            "RUN",
            "RVTY",
            "RYAN",
            "RYN",
            "S",
            "SAIA",
            "SAIC",
            "SAM",
            "SBAC",
            "SBUX",
            "SCCO",
            "SCHW",
            "SCI",
            "SEB",
            "SEE",
            "SEIC",
            "SF",
            "SGEN",
            "SHC",
            "SHW",
            "SIRI",
            "SITE",
            "SJM",
            "SKX",
            "SLB",
            "SLGN",
            "SLM",
            "SMAR",
            "SMG",
            "SNA",
            "SNDR",
            "SNOW",
            "SNPS",
            "SNV",
            "SNX",
            "SO",
            "SOFI",
            "SON",
            "SPB",
            "SPG",
            "SPGI",
            "SPLK",
            "SPOT",
            "SPR",
            "SQ",
            "SRC",
            "SRCL",
            "SRE",
            "SRPT",
            "SSNC",
            "SSRM",
            "ST",
            "STAG",
            "STE",
            "STLD",
            "STT",
            "STWD",
            "STZ",
            "SUI",
            "SWAV",
            "SWK",
            "SWKS",
            "SWN",
            "SYF",
            "SYK",
            "SYNH",
            "SYY",
            "T",
            "TAP",
            "TDC",
            "TDG",
            "TDOC",
            "TDY",
            "TEAM",
            "TECH",
            "TER",
            "TFC",
            "TFSL",
            "TFX",
            "TGT",
            "THC",
            "THG",
            "THO",
            "TJX",
            "TKR",
            "TMO",
            "TMUS",
            "TNDM",
            "TNL",
            "TOL",
            "TOST",
            "TPG",
            "TPL",
            "TPR",
            "TPX",
            "TREX",
            "TRGP",
            "TRIP",
            "TRMB",
            "TROW",
            "TRU",
            "TRV",
            "TSCO",
            "TSLA",
            "TSN",
            "TT",
            "TTC",
            "TTD",
            "TTEK",
            "TTWO",
            "TW",
            "TWLO",
            "TXG",
            "TXN",
            "TXRH",
            "TXT",
            "TYL",
            "U",
            "UA",
            "UAA",
            "UAL",
            "UBER",
            "UDR",
            "UGI",
            "UHAL",
            "UHA.B",
            "UHS",
            "UI",
            "ULTA",
            "UNH",
            "UNM",
            "UNP",
            "UNVR",
            "UPS",
            "URI",
            "USB",
            "USFD",
            "UTHR",
            "UWMC",
            "V",
            "VAC",
            "VEEV",
            "VFC",
            "VICI",
            "VIRT",
            "VLO",
            "VMC",
            "VMI",
            "VMW",
            "VNO",
            "VNT",
            "VOYA",
            "VRSK",
            "VRSN",
            "VRT",
            "VRTX",
            "VSAT",
            "VSCO",
            "VST",
            "VTR",
            "VTRS",
            "VVV",
            "VZ",
            "W",
            "WAB",
            "WAL",
            "WAT",
            "WBA",
            "WBD",
            "WBS",
            "WCC",
            "WDAY",
            "WDC",
            "WEC",
            "WELL",
            "WEN",
            "WEX",
            "WFC",
            "WH",
            "WHR",
            "WING",
            "WLK",
            "WM",
            "WMB",
            "WMS",
            "WMT",
            "WOLF",
            "WOOF",
            "WPC",
            "WRB",
            "WRK",
            "WSC",
            "WSM",
            "WSO",
            "WST",
            "WTFC",
            "WTM",
            "WTRG",
            "WTW",
            "WU",
            "WWD",
            "WWE",
            "WY",
            "WYNN",
            "X",
            "XEL",
            "XOM",
            "XP",
            "XPO",
            "XRAY",
            "XYL",
            "YETI",
            "YUM",
            "Z",
            "ZBH",
            "ZBRA",
            "ZG",
            "ZI",
            "ZION",
            "ZM",
            "ZS",
            "ZTS",
        ];

        this.timeFrames = [1, 2, 3, 4, 5];
    }

    generateRandomQueryValues() {
        const randomTicker = Math.floor(Math.random() * this.tickers.length);
        const randomTimeFrame = Math.floor(Math.random() * this.timeFrames.length);

        return [this.tickers[randomTicker], this.timeFrames[randomTimeFrame]];
    }

    generateDailyQueriesObj(size) {
        let iterations = size;

        // An empty object that will store tickers and durations for the queries i.e. {"APPL": (3, 4, 1), "T": (1)}
        const dailyQueriesObj = {};

        // Populate the dailyQueriesObj Object
        while (iterations > 0) {
            try {
                // Pick a random ticker and a random duration
                const [ticker, timeframe] = this.generateRandomQueryValues();

                // if there is already a key equal to ticker's value...
                if (ticker in dailyQueriesObj) {
                    // check if timeframe exists in the Set
                    const isTimeframeExists = dailyQueriesObj[ticker].has(timeframe);
                    // add the new value
                    dailyQueriesObj[ticker].add(timeframe);
                    // if the new value was successfully added...
                    if (!isTimeframeExists) {
                        // decrease iterations and continue, otherwise, repeat above process
                        iterations--;
                    }
                    // if there is not a key equal to ticker's value...
                } else {
                    // create a new Set and store it in dailyQueriesObj[ticker]
                    dailyQueriesObj[ticker] = new Set();
                    dailyQueriesObj[ticker].add(timeframe);
                    // decrease iterations and continue while loop
                    iterations--;
                }
            } catch (err) {
                console.log(err);
            }
        }

        return dailyQueriesObj;
    }

    generateDateString(date, offset = 0) {
        const newDateObj = new Date();
        newDateObj.setDate(date.getDate() - offset);

        return `${newDateObj.getFullYear()}-${("0" + (newDateObj.getMonth() + 1)).slice(-2)}-${("0" + newDateObj.getDate()).slice(-2)}`;
    }
}

const stockQuery = new StockQuery();

module.exports = stockQuery;
